<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>–í–¢–°–¢.LIVE ‚Äî –ö–≤–µ—Å—Ç ¬´–†–∞–∑–Ω—ã–µ ‚Äî –Ω–æ –≤–º–µ—Å—Ç–µ¬ª</title>
<style>
  :root{
    --bg:#050b17;
    --panel:#071325;
    --card:#091a2e;
    --text:#f9fafb;
    --muted:#9ca3af;
    --accent1:#0ea5e9;
    --accent2:#2563eb;
    --accent3:#f97316;
    --positive:#22c55e;
    --warn:#f59e0b;
    --danger:#ef4444;
  }

  *{box-sizing:border-box}

  body{
    margin:0;
    background:
      radial-gradient(100% 120% at 0% 0%,rgba(37,99,235,0.35) 0,transparent 40%),
      radial-gradient(120% 120% at 100% 0%,rgba(14,165,233,0.3) 0,transparent 45%),
      radial-gradient(80% 60% at 50% 90%,#020617 0,var(--bg) 55%);
    color:var(--text);
    font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  }

  .wrap{max-width:860px;margin:0 auto;padding:20px}
  header{display:flex;align-items:center;gap:14px;padding:14px 0 6px}
  .logo{
    width:48px;height:48px;border-radius:14px;
    background:conic-gradient(from 210deg,var(--accent2),var(--accent1),var(--accent3),var(--accent2));
    display:grid;place-items:center;
    box-shadow:0 10px 28px rgba(15,23,42,.65);
    cursor:pointer; /* –¥–ª—è ¬´—Å–µ–∫—Ä–µ—Ç–Ω–æ–≥–æ¬ª –¥–≤–æ–π–Ω–æ–≥–æ –∫–ª–∏–∫–∞ */
  }
  .logo span{
    font-weight:900;
    letter-spacing:.8px;
    font-size:14px;
    text-shadow:0 1px 3px rgba(0,0,0,.6);
  }

  h1{
    font-size:clamp(20px,4vw,30px);
    margin:4px 0 2px;
  }

  .sub{color:var(--muted);font-size:14px}
  #slogan{color:#e5e7eb;font-size:13px;margin-top:4px;opacity:.9}

  main{
    background:linear-gradient(180deg,rgba(15,23,42,.7),rgba(15,23,42,.9));
    border:1px solid rgba(148,163,184,.25);
    border-radius:20px;
    padding:16px;
    box-shadow:0 20px 50px rgba(15,23,42,.9);
  }

  section{display:none}
  section.active{display:block}

  .panel{
    background:var(--card);
    border:1px solid rgba(148,163,184,.35);
    border-radius:16px;
    padding:16px;
    margin-top:12px;
    box-shadow:0 12px 32px rgba(15,23,42,.8);
  }

  .row{display:flex;flex-wrap:wrap;gap:12px;align-items:center}
  .grid{display:grid;gap:12px}

  input,button,select{font:inherit;color:inherit}

  input[type="text"]{
    width:100%;
    padding:12px 14px;
    border-radius:12px;
    border:1px solid rgba(148,163,184,.6);
    background:#020617;
    color:var(--text);
    outline:none;
    transition:border .15s,box-shadow .15s,background .15s;
  }
  input[type="text"]:focus{
    border-color:var(--accent1);
    box-shadow:0 0 0 1px rgba(56,189,248,.4);
    background:#020617;
  }

  button{
    border:0;
    padding:12px 16px;
    border-radius:999px;
    background:linear-gradient(135deg,var(--accent2),var(--accent1));
    color:#020617;
    font-weight:700;
    cursor:pointer;
    box-shadow:0 10px 26px rgba(15,23,42,.9);
    display:inline-flex;
    align-items:center;
    gap:6px;
    transition:transform .1s,box-shadow .1s,background .2s;
  }
  button.ghost{
    background:transparent;
    border-radius:999px;
    border:1px solid rgba(148,163,184,.7);
    color:var(--text);
    box-shadow:none;
  }
  button:disabled{
    opacity:.5;
    cursor:default;
    box-shadow:none;
  }
  @media (hover:hover){
    button:not(:disabled):hover{
      transform:translateY(-1px);
      box-shadow:0 14px 34px rgba(15,23,42,1);
    }
  }

  .qbox{
    padding:14px;
    border-radius:14px;
    background:#020617;
    border:1px solid rgba(148,163,184,.35);
  }

  .answers{display:grid;gap:10px;margin-top:10px}
  .answers button{
    background:#02081a;
    border-radius:999px;
    border:1px solid rgba(148,163,184,.45);
    justify-content:center;
    color:#f9fafb;
    font-size:14px;
  }
  .answers button.correct{
    outline:2px solid var(--positive);
    background:rgba(34,197,94,.1);
  }
  .answers button.wrong{
    outline:2px solid var(--danger);
    background:rgba(239,68,68,.08);
  }

  .meta{
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:8px;
    color:var(--muted);
    font-size:14px;
    margin-top:8px;
  }
  .tag{
    padding:4px 10px;
    border-radius:999px;
    border:1px solid rgba(148,163,184,.7);
    background:rgba(15,23,42,.9);
  }

  .tiles{
    display:flex;
    flex-wrap:wrap;
    gap:8px;
    justify-content:center;
    margin-top:10px;
  }
    .tile{
    min-width:50px;
    padding:12px 16px;
    border-radius:12px;
    background:radial-gradient(circle at 30% 20%, rgba(255,255,255,0.09), transparent 55%),
               #020817;
    border:1px solid rgba(148,163,184,.9);
    font-weight:800;
    letter-spacing:1.2px;
    font-size:20px;              /* –ö–†–£–ü–ù–ï–ï –ë–£–ö–í–´ */
    color:#f9fafb;               /* –Ø–†–ö–û-–ë–ï–õ–´–ô –¢–ï–ö–°–¢ */
    cursor:pointer;
    box-shadow:0 6px 18px rgba(15,23,42,.9);
    text-shadow:0 0 4px rgba(0,0,0,.8); /* –õ–Å–ì–ö–ê–Ø –ü–û–î–°–í–ï–¢–ö–ê –í–û–ö–†–£–ì –ë–£–ö–í–´ */
    transition:transform .08s,box-shadow .08s,background .15s,opacity .15s;
  }

  .tile.used{
    opacity:.45;
    box-shadow:none;
    background:#020617;
    border-color:rgba(148,163,184,.6);
  }

  .tile:active{
    transform:scale(.95);
    box-shadow:0 4px 12px rgba(15,23,42,.9);
  }
  .code{font-family:ui-monospace,SFMono-Regular,Menlo,monospace;letter-spacing:.6px}

  canvas{
    max-width:100%;
    height:auto;
    border-radius:18px;
    border:1px solid rgba(148,163,184,.5);
    background:#020617;
    box-shadow:0 18px 40px rgba(15,23,42,1);
  }

  .cta{display:flex;flex-wrap:wrap;gap:10px;margin-top:12px}
  .muted{color:var(--muted)}
  .note{
    background:#020617;
    border:1px dashed rgba(148,163,184,.7);
    padding:10px;
    border-radius:12px;
  }

  .scorebar{
    height:10px;
    background:#020617;
    border-radius:999px;
    overflow:hidden;
    border:1px solid rgba(148,163,184,.5);
  }
  .scorebar>div{
    height:100%;
    background:linear-gradient(90deg,var(--accent2),var(--accent1),var(--accent3));
    width:0%;
    transition:width .4s ease-out;
  }
</style>
</head>
<body>
<div class="wrap">
  <header>
    <div class="logo"><span>–í–¢–°–¢</span></div>
    <div>
      <h1>–ö–≤–µ—Å—Ç ¬´–†–∞–∑–Ω—ã–µ ‚Äî –Ω–æ –≤–º–µ—Å—Ç–µ¬ª</h1>
      <div class="sub">–û–Ω–ª–∞–π–Ω-–∏–≥—Ä–∞ –∫ –î–Ω—é –Ω–∞—Ä–æ–¥–Ω–æ–≥–æ –µ–¥–∏–Ω—Å—Ç–≤–∞ –æ—Ç –í–¢–°–¢.LIVE</div>
      <div id="slogan"></div>
    </div>
  </header>

  <main>
    <!-- START -->
    <section id="screen-start" class="active">
      <div class="panel grid" style="gap:14px">
        <div class="meta">
          <span>‚è± –§–æ—Ä–º–∞—Ç</span>
          <span class="tag"><b>3 –º–∏–Ω—É—Ç—ã</b>, 3 –∑–∞–¥–∞–Ω–∏—è, 100 –æ—á–∫–æ–≤ –º–∞–∫—Å–∏–º—É–º</span>
        </div>
        <label>–¢–≤–æ—ë –∏–º—è (–¥–ª—è –±–µ–π–¥–∂–∞):</label>
        <input id="playerName" type="text" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ê–ª–∏–Ω–∞ –ò24.3–∫">
        <div class="cta">
          <button id="btnStart">–°—Ç–∞—Ä—Ç –∫–≤–µ—Å—Ç–∞ üöÄ</button>
          <button class="ghost" id="btnHow">–ö–∞–∫ –∏–≥—Ä–∞—Ç—å?</button>
        </div>
        <div id="howto" class="muted" style="display:none">
          <b>–ß—Ç–æ –±—É–¥–µ—Ç?</b><br>
          ‚ñ∏ –í–∏–∫—Ç–æ—Ä–∏–Ω–∞ –ø—Ä–æ –∫—É–ª—å—Ç—É—Ä—É –µ–¥–∏–Ω—Å—Ç–≤–∞ –∏ –∂–∏–∑–Ω—å –í–¢–°–¢<br>
          ‚ñ∏ –°–∏—Ç—É–∞—Ü–∏–∏ –≤ –≥—Ä—É–ø–ø–µ: –≤—ã–±–∏—Ä–∞–µ—à—å –ª—É—á—à–µ–µ –¥–µ–π—Å—Ç–≤–∏–µ<br>
          ‚ñ∏ –°–±–æ—Ä–∫–∞ —Å–ª–æ–≤–∞ ¬´–ï–î–ò–ù–°–¢–í–û¬ª ‚Äî –∫–∞–∂–¥–∞—è –±—É–∫–≤–∞ —Ä–∞—Å–∫—Ä—ã–≤–∞–µ—Ç —Ü–µ–Ω–Ω–æ—Å—Ç—å.<br><br>
          –ù–∞ —Ñ–∏–Ω–∏—à–µ ‚Äî –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –±–µ–π–¥–∂ –∏ –≤–∫–ª–∞–¥ –≤ –æ–±—â—É—é ¬´–∫–æ–ø–∏–ª–∫—É –µ–¥–∏–Ω—Å—Ç–≤–∞¬ª.
        </div>
      </div>
    </section>

    <!-- QUIZ -->
    <section id="screen-quiz">
      <div class="panel">
        <div class="meta">
          <div>–ó–∞–¥–∞–Ω–∏–µ 1/3 ‚Äî –í–∏–∫—Ç–æ—Ä–∏–Ω–∞ ¬´–í–¢–°–¢ & –µ–¥–∏–Ω—Å—Ç–≤–æ¬ª</div>
          <div>‚è≥ –û—Å—Ç–∞–ª–æ—Å—å: <b id="timeLeft">03:00</b> | –û—á–∫–∏: <b id="scoreA">0</b></div>
        </div>
        <p class="muted" id="tipQuiz"></p>
        <div id="quizWrap" class="grid" style="gap:12px"></div>
        <div class="cta"><button id="toSort" disabled>–î–∞–ª–µ–µ ‚Üí –°–∏—Ç—É–∞—Ü–∏–∏ –≤ –≥—Ä—É–ø–ø–µ</button></div>
      </div>
    </section>

    <!-- CASES -->
    <section id="screen-sort">
      <div class="panel">
        <div class="meta">
          <div>–ó–∞–¥–∞–Ω–∏–µ 2/3 ‚Äî –°–∏—Ç—É–∞—Ü–∏–∏ –≤ –≥—Ä—É–ø–ø–µ</div>
          <div>‚è≥ –û—Å—Ç–∞–ª–æ—Å—å: <b id="timeLeft2">03:00</b> | –û—á–∫–∏: <b id="scoreB">0</b></div>
        </div>
        <p class="muted">–í—ã–±–µ—Ä–∏ –≤–∞—Ä–∏–∞–Ω—Ç –¥–µ–π—Å—Ç–≤–∏—è, –∫–æ—Ç–æ—Ä—ã–π –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –µ–¥–∏–Ω—Å—Ç–≤–æ –≤ –≥—Ä—É–ø–ø–µ.</p>
        <div id="casesWrap" class="grid" style="gap:12px"></div>
        <p class="muted" id="tipSort" style="margin-top:4px"></p>
        <div class="cta">
          <button id="toTiles" class="ghost" disabled>–î–∞–ª–µ–µ ‚Üí –°–æ–±–µ—Ä–∏ —Å–ª–æ–≤–æ</button>
        </div>
      </div>
    </section>

    <!-- TILES -->
    <section id="screen-tiles">
      <div class="panel">
        <div class="meta">
          <div>–ó–∞–¥–∞–Ω–∏–µ 3/3 ‚Äî –°–æ–±–µ—Ä–∏ —Å–ª–æ–≤–æ ¬´–ï–î–ò–ù–°–¢–í–û¬ª</div>
          <div>‚è≥ –û—Å—Ç–∞–ª–æ—Å—å: <b id="timeLeft3">03:00</b> | –û—á–∫–∏: <b id="scoreC">0</b></div>
        </div>
        <p class="muted">–ö–æ—Å–Ω–∏—Å—å –±—É–∫–≤ –ø–æ –ø–æ—Ä—è–¥–∫—É. –ö–∞–∂–¥—ã–π —Å–∏–º–≤–æ–ª ‚Äî —Ü–µ–Ω–Ω–æ—Å—Ç—å –í–¢–°–¢.</p>
        <div id="tiles" class="tiles"></div>
        <div style="margin-top:8px" class="code" id="progressWord"></div>
        <div class="note muted" id="hintBox" style="display:none"></div>
        <p class="muted" id="tipTiles" style="margin-top:6px"></p>
        <div class="cta">
          <button id="finish" disabled>–§–∏–Ω–∏—à –∏ –±–µ–π–¥–∂ üéì</button>
        </div>
      </div>
    </section>

    <!-- RESULT -->
    <section id="screen-result">
      <div class="panel">
        <div class="meta">
          <div>–ì–æ—Ç–æ–≤–æ! –¢–≤–æ–π –±–µ–π–¥–∂</div>
          <div>–ò—Ç–æ–≥: <b id="finalScore">0</b> –æ—á–∫–æ–≤</div>
        </div>
        <p class="muted" id="finalMessage" style="margin-top:6px"></p>
        <canvas id="badge" width="900" height="1200" aria-label="–ë–µ–π–¥–∂"></canvas>
        <div class="cta">
          <button id="downloadBadge">–°–∫–∞—á–∞—Ç—å PNG</button>
          <button id="copyShare" class="ghost">–¢–µ–∫—Å—Ç –¥–ª—è —Å—Ç–æ—Ä–∏—Å</button>
          <!-- –°–∫—Ä—ã—Ç–∞—è –∞–¥–º–∏–Ω-–∫–Ω–æ–ø–∫–∞: –ø–æ—è–≤–∏—Ç—Å—è –ø–æ –¥–≤–æ–π–Ω–æ–º—É –∫–ª–∏–∫—É –Ω–∞ –ª–æ–≥–æ—Ç–∏–ø -->
          <button id="exportCSV" class="ghost" style="display:none">–°–∫–∞—á–∞—Ç—å –∂—É—Ä–Ω–∞–ª (CSV)</button>
        </div>

        <div class="panel" style="margin-top:16px">
          <div class="meta">
            <div>–ö–æ–ø–∏–ª–∫–∞ –µ–¥–∏–Ω—Å—Ç–≤–∞</div>
            <div class="muted"><span id="poolLabel">–õ–æ–∫–∞–ª—å–Ω–∞—è (–Ω–∞ —ç—Ç–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ)</span></div>
          </div>
          <div class="row">
            <div style="min-width:220px">–û–±—â–∏–π —Å—á—ë—Ç: <b id="poolTotal">0</b></div>
            <div class="scorebar" style="flex:1 1 240px"><div id="poolBar"></div></div>
          </div>
          <p class="muted" style="margin:8px 0 0">
            * –ñ—É—Ä–Ω–∞–ª —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —ç—Ç–æ–º –±—Ä–∞—É–∑–µ—Ä–µ. –û—á–∏—Å—Ç–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏/–∫—ç—à–∞ —É–¥–∞–ª–∏—Ç –¥–∞–Ω–Ω—ã–µ.
          </p>
        </div>
      </div>
    </section>
  </main>
</div>

<script>
const CONFIG = {
  brand: '–í–¢–°–¢.LIVE',
  gradientA: '#2563eb',
  gradientB: '#0ea5e9'
};

const $ = s=>document.querySelector(s);
const screens = ['#screen-start','#screen-quiz','#screen-sort','#screen-tiles','#screen-result'];

let nameUser='', score=0, tLeft=180, timerId=null;
const SCORE = {quiz:0, sort:0, tiles:0};
const LOCAL_POOL_KEY = 'vtst_unity_total';
const RESULTS_KEY = 'vtst_unity_results';

const SLOGANS = [
  '–†–∞–∑–Ω—ã–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ ‚Äî –æ–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ –í–¢–°–¢.',
  '–ï–¥–∏–Ω—Å—Ç–≤–æ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –º–∞–ª–µ–Ω—å–∫–∏—Ö –¥–µ–ª –∫–∞–∂–¥—ã–π –¥–µ–Ω—å.',
  '–ú–µ–¥–∏–∞, —É—á–µ–±–∞, —Å–ø–æ—Ä—Ç ‚Äî –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç, –∫–æ–≥–¥–∞ –º—ã –≤–º–µ—Å—Ç–µ.',
  '–ü–µ—Ä–≤–æ–∫—É—Ä—Å–Ω–∏–∫–∏, –≤—ã–ø—É—Å–∫–Ω–∏–∫–∏, –ø–µ–¥–∞–≥–æ–≥–∏ ‚Äî –æ–¥–∏–Ω —Ç–µ—Ö–Ω–∏–∫—É–º.',
  '–ö–æ–≥–¥–∞ –ø–æ–º–æ–≥–∞–µ—à—å –¥—Ä—É–≥–æ–º—É ‚Äî —É—Å–∏–ª–∏–≤–∞–µ—à—å –≤—Å—é –≥—Ä—É–ø–ø—É.'
];

const TIPS = {
  quiz: [
    '–õ–∞–π—Ñ—Ö–∞–∫: –æ—Ç–≤–µ—á–∞–π —Ç–∞–∫, –∫–∞–∫ –µ—Å–ª–∏ –±—ã —Ä–µ—á—å —à–ª–∞ –æ —Ç–≤–æ–µ–π –≥—Ä—É–ø–ø–µ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å.',
    '–î—É–º–∞–π –æ —Ç–æ–º, —á—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç, –∞ —á—Ç–æ —Ä–∞–∑—Ä—É—à–∞–µ—Ç –∞—Ç–º–æ—Å—Ñ–µ—Ä—É –≤ –∞—É–¥–∏—Ç–æ—Ä–∏–∏.',
    '–ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ —Ç—ã –∫—É—Ä–∞—Ç–æ—Ä: –∫–∞–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è —Ç—ã –±—ã –ø–æ–æ—â—Ä–∏–ª?',
    '–ï–¥–∏–Ω—Å—Ç–≤–æ ‚Äî —ç—Ç–æ –Ω–µ ¬´–º–æ–∏ –ª—é–¥–∏ –∏ —á—É–∂–∏–µ¬ª, –∞ –æ–±—â–∏–π —Ç–µ—Ö–Ω–∏–∫—É–º –∏ –æ–±—â–∏–µ —Ü–µ–ª–∏.'
  ],
  sort: [
    '–ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ —Ä–µ—á—å –∏–¥—ë—Ç –æ –≤–∞—à–µ–π –≥—Ä—É–ø–ø–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–π –ø–∞—Ä–µ.',
    '–î—É–º–∞–π, –∫–∞–∫ –±—ã –ø–æ—Å—Ç—É–ø–∏–ª –∫—É—Ä–∞—Ç–æ—Ä, —á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É.',
    '–ò–Ω–æ–≥–¥–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ ‚Äî –Ω–µ —Å–∞–º–æ–µ —É–¥–æ–±–Ω–æ–µ, –Ω–æ —á–µ—Å—Ç–Ω–æ–µ.',
    '–ì–ª–∞–≤–Ω—ã–π –∫—Ä–∏—Ç–µ—Ä–∏–π: –≤—Å–µ–º –ª–∏ –æ—Ç —ç—Ç–æ–≥–æ —Å—Ç–∞–Ω–µ—Ç –ø—Ä–æ—â–µ —Ä–∞–±–æ—Ç–∞—Ç—å –≤–º–µ—Å—Ç–µ?'
  ],
  tiles: [
    '–ü–æ–¥—Å–∫–∞–∑–∫–∞: –±—É–∫–≤—ã –º–æ–∂–Ω–æ —á–∏—Ç–∞—Ç—å –∫–∞–∫ ¬´—Å–ª–æ–≤–∞—Ä—å –µ–¥–∏–Ω—Å—Ç–≤–∞¬ª –í–¢–°–¢.',
    '–ï ‚Äî –µ–¥–∏–Ω—ã–µ —Ü–µ–ª–∏, –î ‚Äî –¥–æ–≤–µ—Ä–∏–µ, –ò ‚Äî –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤–∞‚Ä¶ –û—Å—Ç–∞–ª—å–Ω–æ–µ —É–≤–∏–¥–∏—à—å —Å–∞–º.',
    '–ü–æ–ø—Ä–æ–±—É–π —É–≥–∞–¥—ã–≤–∞—Ç—å –ø–æ–¥—Å–∫–∞–∑–∫–∏ –∫ –±—É–∫–≤–µ –µ—â—ë –¥–æ –ø–æ—è–≤–ª–µ–Ω–∏—è –ø–æ–¥—Å–∫–∞–∑–∫–∏.',
    '–°–ª–æ–≤–æ ¬´–ï–î–ò–ù–°–¢–í–û¬ª –∑–¥–µ—Å—å –Ω–µ —Å–ª—É—á–∞–π–Ω–æ ‚Äî —ç—Ç–æ –Ω–∞—à –≥–ª–∞–≤–Ω—ã–π —Å–º—ã—Å–ª.'
  ]
};

const QUESTIONS = [
  {q:'–ü–æ–º–æ—á—å –ø–µ—Ä–≤–æ–∫—É—Ä—Å–Ω–∏–∫—É —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π –≤ –£–õ–ö‚Ññ2 ‚Äî —ç—Ç–æ –ø—Ä–æ –µ–¥–∏–Ω—Å—Ç–≤–æ?', correct:true},
  {q:'–°–æ—Ä–≤–∞—Ç—å —á—É–∂—É—é –∞—Ñ–∏—à—É –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è –≤ —Ç–µ—Ö–Ω–∏–∫—É–º–µ ‚Äî —ç—Ç–æ –ø—Ä–æ –µ–¥–∏–Ω—Å—Ç–≤–æ?', correct:false},
  {q:'–ü–æ–¥–µ–ª–∏—Ç—å—Å—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–º –∏ –Ω–∞–ø–æ–º–Ω–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –¢–ë –≤ –º–∞—Å—Ç–µ—Ä—Å–∫–æ–π ‚Äî —ç—Ç–æ –ø—Ä–æ –µ–¥–∏–Ω—Å—Ç–≤–æ?', correct:true},
  {q:'–ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Å—å–±—É –æ–¥–Ω–æ–≥—Ä—É–ø–ø–Ω–∏–∫–∞ –æ –ø–æ–º–æ—â–∏ —Å –∑–∞–¥–∞–Ω–∏–µ–º ‚Äî —ç—Ç–æ –ø—Ä–æ –µ–¥–∏–Ω—Å—Ç–≤–æ?', correct:false},
  {q:'–°–¥–µ–ª–∞—Ç—å –æ–±—â–∏–π –ø—Ä–æ–µ–∫—Ç –≤–º–µ—Å—Ç–µ —Å –¥—Ä—É–≥–æ–π –≥—Ä—É–ø–ø–æ–π ‚Äî —ç—Ç–æ –ø—Ä–æ –µ–¥–∏–Ω—Å—Ç–≤–æ?', correct:true},
  {q:'–û–ø–æ–∑–¥–∞—Ç—å –Ω–∞ —Ä–µ–ø–µ—Ç–∏—Ü–∏—é –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è –∏ –Ω–∏–∫–æ–≥–æ –Ω–µ –ø—Ä–µ–¥—É–ø—Ä–µ–¥–∏—Ç—å ‚Äî —ç—Ç–æ –ø—Ä–æ –µ–¥–∏–Ω—Å—Ç–≤–æ?', correct:false},
  {q:'–†–∞—Å—Å–∫–∞–∑—ã–≤–∞—Ç—å –Ω–æ–≤–∏—á–∫–∞–º, –≥–¥–µ –∫–∞–∫–∏–µ –∫–∞–±–∏–Ω–µ—Ç—ã –∏ –∫–æ—Ä–ø—É—Å–∞ ‚Äî —ç—Ç–æ –ø—Ä–æ –µ–¥–∏–Ω—Å—Ç–≤–æ?', correct:true},
  {q:'–ü–æ—Ä—Ç–∏—Ç—å –æ–±—â–µ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –≤ –∞—É–¥–∏—Ç–æ—Ä–∏–∏ —Ä–∞–¥–∏ ¬´–ø—Ä–∏–∫–æ–ª–∞¬ª ‚Äî —ç—Ç–æ –ø—Ä–æ –µ–¥–∏–Ω—Å—Ç–≤–æ?', correct:false},
  {q:'–£—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å –≤ —É–±–æ—Ä–∫–µ –∞—É–¥–∏—Ç–æ—Ä–∏–∏ –ø–æ—Å–ª–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è ‚Äî —ç—Ç–æ –ø—Ä–æ –µ–¥–∏–Ω—Å—Ç–≤–æ?', correct:true},
  {q:'–û–±—Å—É–∂–¥–∞—Ç—å –æ–¥–Ω–æ–≥—Ä—É–ø–ø–Ω–∏–∫–∞ –∑–∞ —Å–ø–∏–Ω–æ–π –≤–º–µ—Å—Ç–æ —á–µ—Å—Ç–Ω–æ–≥–æ –¥–∏–∞–ª–æ–≥–∞ ‚Äî —ç—Ç–æ –ø—Ä–æ –µ–¥–∏–Ω—Å—Ç–≤–æ?', correct:false},
  {q:'–ü—Ä–∏–π—Ç–∏ –ø–æ–¥–¥–µ—Ä–∂–∞—Ç—å –≥—Ä—É–ø–ø—É –Ω–∞ –∫–æ–Ω–∫—É—Ä—Å–µ –∏–ª–∏ –º–∞—Ç—á–µ ‚Äî —ç—Ç–æ –ø—Ä–æ –µ–¥–∏–Ω—Å—Ç–≤–æ?', correct:true},
  {q:'–í—ã—Å—Ç–∞–≤–∏—Ç—å –æ–±—â–∏–π –ø—Ä–æ–µ–∫—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–≤–æ—ë –∏–º—è –∏ –Ω–µ –æ—Ç–º–µ—Ç–∏—Ç—å –∫–æ–º–∞–Ω–¥—É ‚Äî —ç—Ç–æ –ø—Ä–æ –µ–¥–∏–Ω—Å—Ç–≤–æ?', correct:false},
  {q:'–ü–æ–¥–µ–ª–∏—Ç—å—Å—è –∫–æ–Ω—Å–ø–µ–∫—Ç–∞–º–∏ –∏ –ø–æ–¥—Å–∫–∞–∑–∫–∞–º–∏ –∫ –∑–∞—á—ë—Ç—É ‚Äî —ç—Ç–æ –ø—Ä–æ –µ–¥–∏–Ω—Å—Ç–≤–æ?', correct:true},
  {q:'–°–ø–µ—Ü–∏–∞–ª—å–Ω–æ –º–µ—à–∞—Ç—å –¥—Ä—É–≥–æ–π –≥—Ä—É–ø–ø–µ, —á—Ç–æ–±—ã ¬´–≤—ã–∏–≥—Ä–∞—Ç—å –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏—é¬ª ‚Äî —ç—Ç–æ –ø—Ä–æ –µ–¥–∏–Ω—Å—Ç–≤–æ?', correct:false},
  {q:'–ü–æ–º–æ—á—å –æ–¥–Ω–æ–≥—Ä—É–ø–ø–Ω–∏–∫—É –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—é –ø–µ—Ä–µ–¥ –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏–µ–º ‚Äî —ç—Ç–æ –ø—Ä–æ –µ–¥–∏–Ω—Å—Ç–≤–æ?', correct:true},
  {q:'–í—ã–≤–µ—Å—Ç–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç –≤ –ø—É–±–ª–∏—á–Ω—ã–π —Å–∫–∞–Ω–¥–∞–ª –≤ —Å–æ—Ü—Å–µ—Ç—è—Ö –ø—Ä–æ —Ç–µ—Ö–Ω–∏–∫—É–º ‚Äî —ç—Ç–æ –ø—Ä–æ –µ–¥–∏–Ω—Å—Ç–≤–æ?', correct:false},
  {q:'–ü–æ–∑–¥—Ä–∞–≤–∏—Ç—å —Ä–µ–±—è—Ç –∏–∑ –¥—Ä—É–≥–æ–≥–æ –æ—Ç–¥–µ–ª–µ–Ω–∏—è —Å –ø–æ–±–µ–¥–æ–π ‚Äî —ç—Ç–æ –ø—Ä–æ –µ–¥–∏–Ω—Å—Ç–≤–æ?', correct:true},
  {q:'–û—Å—Ç–∞–≤–∏—Ç—å –º—É—Å–æ—Ä –≤ –∞—É–¥–∏—Ç–æ—Ä–∏–∏ –∏ –≤—ã–∫–ª—é—á–∏—Ç—å —Å–≤–µ—Ç ¬´–ø—É—Å—Ç—å –¥—Ä—É–≥–∏–µ —É–±–∏—Ä–∞—é—Ç¬ª ‚Äî —ç—Ç–æ –ø—Ä–æ –µ–¥–∏–Ω—Å—Ç–≤–æ?', correct:false},
  {q:'–ü–æ—É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å –≤ –æ–ø—Ä–æ—Å–µ —Ç–µ—Ö–Ω–∏–∫—É–º–∞, —á—Ç–æ–±—ã —É–ª—É—á—à–∏—Ç—å —É—Å–ª–æ–≤–∏—è –æ–±—É—á–µ–Ω–∏—è ‚Äî —ç—Ç–æ –ø—Ä–æ –µ–¥–∏–Ω—Å—Ç–≤–æ?', correct:true},
  {q:'–ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Ä–∞–¥–∏ ¬´—ç—Ñ—Ñ–µ–∫—Ç–Ω–æ–≥–æ –∫–∞–¥—Ä–∞¬ª –≤ —Å–æ—Ü—Å–µ—Ç—è—Ö ‚Äî —ç—Ç–æ –ø—Ä–æ –µ–¥–∏–Ω—Å—Ç–≤–æ?', correct:false},
  {q:'–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –∏–¥–µ—é –ø–µ—Ä–≤–æ–∫—É—Ä—Å–Ω–∏–∫–∞ –∏ –ø–æ–º–æ—á—å –æ—Ñ–æ—Ä–º–∏—Ç—å –µ—ë ‚Äî —ç—Ç–æ –ø—Ä–æ –µ–¥–∏–Ω—Å—Ç–≤–æ?', correct:true},
  {q:'–í –ø–æ—Å–ª–µ–¥–Ω–∏–π –º–æ–º–µ–Ω—Ç –æ—Ç–º–µ–Ω–∏—Ç—å —Å–≤–æ—ë —É—á–∞—Å—Ç–∏–µ –≤ –≤–∞–∂–Ω–æ–º –∫–æ–º–∞–Ω–¥–Ω–æ–º –¥–µ–ª–µ –±–µ–∑ –ø—Ä–∏—á–∏–Ω—ã ‚Äî —ç—Ç–æ –ø—Ä–æ –µ–¥–∏–Ω—Å—Ç–≤–æ?', correct:false}
];

const CASES = [
  {
    text:'–ü–µ—Ä–µ–¥ –æ–±—â–∏–º –∑–∞—á—ë—Ç–æ–º –æ–¥–Ω–æ–≥—Ä—É–ø–ø–Ω–∏–∫ –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç —Ç–µ–º—É –∏ —Å—Ç–µ—Å–Ω—è–µ—Ç—Å—è —Å–ø—Ä–æ—Å–∏—Ç—å –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è.',
    options:[
      '–°–∫–∞–∑–∞—Ç—å, —á—Ç–æ —É –∫–∞–∂–¥–æ–≥–æ —Å–≤–æ–∏ –ø—Ä–æ–±–ª–µ–º—ã –∏ —É–π—Ç–∏',
      '–î–∞—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ —É—á–µ–±–Ω–∏–∫ –±–µ–∑ –æ–±—ä—è—Å–Ω–µ–Ω–∏–π',
      '–ù–∞–π—Ç–∏ 10‚Äì15 –º–∏–Ω—É—Ç –∏ –æ–±—ä—è—Å–Ω–∏—Ç—å –æ—Å–Ω–æ–≤–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã'
    ],
    correct:2
  },
  {
    text:'–í—ã –≥–æ—Ç–æ–≤–∏—Ç–µ –≥—Ä—É–ø–ø–æ–≤–æ–π –ø—Ä–æ–µ–∫—Ç, –æ–¥–∏–Ω —É—á–∞—Å—Ç–Ω–∏–∫ —Å–∏–ª—å–Ω–æ –æ—Ç—Å—Ç–∞—ë—Ç –ø–æ —Å—Ä–æ–∫–∞–º.',
    options:[
      '–£–¥–∞–ª–∏—Ç—å –µ–≥–æ —Ñ–∞–º–∏–ª–∏—é —Å –ø—Ä–æ–µ–∫—Ç–∞ –∏ –º–æ–ª—á–∞ —Å–¥–∞—Ç—å —Ä–∞–±–æ—Ç—É',
      '–°–æ–±—Ä–∞—Ç—å—Å—è –º–∏–Ω–∏-–∫–æ–º–∞–Ω–¥–æ–π, —Ä–∞–∑–æ–±—Ä–∞—Ç—å, –≥–¥–µ –ø–æ–º–æ—á—å, –∏ –ø–µ—Ä–µ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∑–∞–¥–∞—á–∏',
      '–°–¥–µ–ª–∞—Ç—å –≤—Å—ë –∑–∞ –Ω–µ–≥–æ, –Ω–æ –ø–æ—Ç–æ–º –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –Ω–∞–ø–æ–º–∏–Ω–∞—Ç—å –æ–± —ç—Ç–æ–º'
    ],
    correct:1
  },
  {
    text:'–ü–µ—Ä–≤–æ–∫—É—Ä—Å–Ω–∏–∫ –ø–æ—Ç–µ—Ä—è–ª—Å—è –≤ –∫–æ—Ä–ø—É—Å–µ –ø–µ—Ä–µ–¥ –ø–∞—Ä–æ–π –∏ —è–≤–Ω–æ –Ω–µ—Ä–≤–Ω–∏—á–∞–µ—Ç.',
    options:[
      '–°–Ω—è—Ç—å —Å—Ç–æ—Ä–∏—Å –æ —Ç–æ–º, –∫–∞–∫ ¬´–Ω–æ–≤–∏—á–∫–∏ –æ–ø—è—Ç—å –∑–∞–±–ª—É–¥–∏–ª–∏—Å—å¬ª',
      '–ü–æ–∫–∞–∑–∞—Ç—å –Ω—É–∂–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –∏ –∫–æ—Ä–æ—Ç–∫–æ —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å, –∫–∞–∫ –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è',
      '–°–∫–∞–∑–∞—Ç—å ¬´–ø–æ—Å–º–æ—Ç—Ä–∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –µ—â—ë —Ä–∞–∑¬ª –∏ –ø—Ä–æ–π—Ç–∏ –º–∏–º–æ'
    ],
    correct:1
  },
  {
    text:'–í–æ –≤—Ä–µ–º—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∫ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—é —á–∞—Å—Ç—å –≥—Ä—É–ø–ø—ã —Å–ø–æ—Ä–∏—Ç –∏–∑-–∑–∞ –º–µ–ª–æ—á–µ–π –∏ —Ä–∞–±–æ—Ç–∞ –≤—Å—Ç–∞—ë—Ç.',
    options:[
      '–û—Å—Ç–∞–≤–∏—Ç—å –∏—Ö —Ä—É–≥–∞—Ç—å—Å—è –∏ –∑–∞–Ω—è—Ç—å—Å—è —Ç–æ–ª—å–∫–æ —Å–≤–æ–µ–π –∑–∞–¥–∞—á–µ–π',
      '–ü–æ–ø—ã—Ç–∞—Ç—å—Å—è —Å—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –æ–±—â—É—é —Ü–µ–ª—å –∏ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å —Ä–∞–∑–¥–µ–ª–∏—Ç—å —Å–ø–æ—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –Ω–∞ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ',
      '–°–¥–µ–ª–∞—Ç—å —Ñ–æ—Ç–æ ¬´—Å–∫–∞–Ω–¥–∞–ª–∞¬ª –∏ –≤—ã–ª–æ–∂–∏—Ç—å –≤ –ª–∏—á–Ω—ã–µ —Å–æ—Ü—Å–µ—Ç–∏'
    ],
    correct:1
  },
  {
    text:'–û–¥–Ω–æ–≥—Ä—É–ø–ø–Ω–∏–∫ —á–∞—Å—Ç–æ –æ–ø–∞–∑–¥—ã–≤–∞–µ—Ç, –∏–∑-–∑–∞ —á–µ–≥–æ —Å—Ç—Ä–∞–¥–∞–µ—Ç –æ–±—â–∏–π –ø—Ä–æ–µ–∫—Ç.',
    options:[
      '–ù–∏—á–µ–≥–æ –Ω–µ –≥–æ–≤–æ—Ä–∏—Ç—å, –∞ –ø–æ—Ç–æ–º —É—Å—Ç—Ä–æ–∏—Ç—å —Å–∫–∞–Ω–¥–∞–ª –ø—Ä–∏ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ',
      '–°–ø–æ–∫–æ–π–Ω–æ –æ–±—Å—É–¥–∏—Ç—å, –≤ —á—ë–º –ø—Ä–∏—á–∏–Ω–∞ –æ–ø–æ–∑–¥–∞–Ω–∏–π, –∏ –≤–º–µ—Å—Ç–µ –Ω–∞–π—Ç–∏ —Ä–µ—à–µ–Ω–∏–µ',
      '–ü—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ—Å—Ç–∞—Ç—å –¥–∞–≤–∞—Ç—å –µ–º—É –∑–∞–¥–∞—á–∏, –Ω–µ –æ–±—ä—è—Å–Ω—è—è –ø—Ä–∏—á–∏–Ω'
    ],
    correct:1
  },
  {
    text:'–í –≥—Ä—É–ø–ø–µ –ø–æ—è–≤–∏–ª–∏—Å—å —Å–ª—É—Ö–∏ –ø—Ä–æ –æ–¥–Ω–æ–≥–æ —Å—Ç—É–¥–µ–Ω—Ç–∞, –∏ —Ç–µ–±—è –ø—Ä–æ—Å—è—Ç ¬´–ø–æ–¥–µ–ª–∏—Ç—å—Å—è –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç—è–º–∏¬ª.',
    options:[
      '–î–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä—É ¬´—Ñ–∞–∫—Ç–æ–≤¬ª, —á—Ç–æ–±—ã –∫–∞–∑–∞—Ç—å—Å—è –≤ —Ç–µ–º–µ',
      '–°–∫–∞–∑–∞—Ç—å, —á—Ç–æ –æ–±—Å—É–∂–¥–∞—Ç—å —á—É–∂—É—é –ª–∏—á–Ω—É—é –∂–∏–∑–Ω—å ‚Äî –Ω–µ –≤–∞—Ä–∏–∞–Ω—Ç',
      '–°–¥–µ–ª–∞—Ç—å –≤–∏–¥, —á—Ç–æ –Ω–∏—á–µ–≥–æ –Ω–µ —Å–ª—ã—à–∞–ª, –Ω–æ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ —Å–ª—É—à–∞—Ç—å'
    ],
    correct:1
  },
  {
    text:'–†–µ–±—è—Ç–∞ –∏–∑ –¥—Ä—É–≥–æ–π —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–∏–≥–ª–∞—à–∞—é—Ç –≤–∞—Å –ø–æ—É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å –≤ —Å–æ–≤–º–µ—Å—Ç–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ.',
    options:[
      '–û—Ç–∫–∞–∑–∞—Ç—å—Å—è, –ø–æ—Ç–æ–º—É —á—Ç–æ ¬´–Ω–∞–º —Å–≤–æ–∏—Ö –¥–µ–ª —Ö–≤–∞—Ç–∞–µ—Ç¬ª',
      '–°–æ–≥–ª–∞—Å–∏—Ç—å—Å—è –∏ —Å—Ä–∞–∑—É –≤–∑—è—Ç—å –Ω–∞ —Å–µ–±—è –≤—Å–µ –∫–ª—é—á–µ–≤—ã–µ —Ä–æ–ª–∏',
      '–û–±—Å—É–¥–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç –∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∑–∞–¥–∞—á–∏ —Ç–∞–∫, —á—Ç–æ–±—ã –≤—Å–µ–º –±—ã–ª–æ –ø–æ–ª–µ–∑–Ω–æ'
    ],
    correct:2
  },
  {
    text:'–ü–æ—Å–ª–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è –≤ –∞—É–¥–∏—Ç–æ—Ä–∏–∏ –±–µ—Å–ø–æ—Ä—è–¥–æ–∫.',
    options:[
      '–°–∫–∞–∑–∞—Ç—å ¬´–∑–∞ –Ω–∞–º–∏ —É–±–µ—Ä—É—Ç¬ª –∏ —É–π—Ç–∏',
      '–°–æ–±—Ä–∞—Ç—å—Å—è –≤—Ç—Ä–æ—ë–º-—á–µ—Ç–≤–µ—Ä–æ–º –∏ –±—ã—Å—Ç—Ä–æ –ø—Ä–∏–≤–µ—Å—Ç–∏ –∞—É–¥–∏—Ç–æ—Ä–∏—é –≤ –ø–æ—Ä—è–¥–æ–∫',
      '–°–¥–µ–ª–∞—Ç—å —Å—Ç–æ—Ä–∏—Å —Å –º—É—Å–æ—Ä–æ–º –∏ –æ—Ç–º–µ—Ç–∏—Ç—å —Ç–µ—Ö–Ω–∏–∫—É–º'
    ],
    correct:1
  }
];

const WORD = '–ï–î–ò–ù–°–¢–í–û';
const LETTER_HINTS = {
  '–ï':'–ï–¥–∏–Ω—ã–µ —Ü–µ–ª–∏ ‚Äî –ø–æ–Ω–∏–º–∞–µ–º, –∑–∞—á–µ–º –≤—Å—ë –¥–µ–ª–∞–µ–º',
  '–î':'–î–æ–≤–µ—Ä–∏–µ ‚Äî –º–æ–∂–Ω–æ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—Ç—å –¥—Ä—É–≥ –Ω–∞ –¥—Ä—É–≥–∞',
  '–ò':'–ò–Ω–∏—Ü–∏–∞—Ç–∏–≤–∞ ‚Äî –∏–¥–µ–∏ —Ä–æ–∂–¥–∞—é—Ç—Å—è –Ω–µ —Ç–æ–ª—å–∫–æ —É —Å—Ç–∞—Ä—à–∏—Ö',
  '–ù':'–ù–∞—Å—Ç–∞–≤–Ω–∏—á–µ—Å—Ç–≤–æ ‚Äî —Å—Ç–∞—Ä—à–∏–µ –ø–æ–º–æ–≥–∞—é—Ç –º–ª–∞–¥—à–∏–º',
  '–°':'–°–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–æ ‚Äî –æ–±—ä–µ–¥–∏–Ω—è–µ–º —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ –∏ –∫—É—Ä—Å—ã',
  '–¢':'–¢—Ä—É–¥–æ–ª—é–±–∏–µ ‚Äî –¥–µ–ª–∞–µ–º –Ω–µ ¬´–¥–ª—è –≥–∞–ª–æ—á–∫–∏¬ª, –∞ –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç',
  '–í':'–í–æ–≤–ª–µ—á—ë–Ω–Ω–æ—Å—Ç—å ‚Äî —É—á–∞—Å—Ç–≤—É–µ–º, –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ –Ω–∞–±–ª—é–¥–∞–µ–º',
  '–û':'–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å ‚Äî –æ—Ç–≤–µ—á–∞–µ–º –∑–∞ —Å–≤–æ–∏ —Ä–µ—à–µ–Ω–∏—è –∏ —Å–ª–æ–≤–∞'
};

function goto(id){ screens.forEach(s=>$(s).classList.toggle('active', s===id)); }
function shuffle(a){ for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];} return a; }
function rand(arr){return arr[Math.floor(Math.random()*arr.length)];}

function startTimer(){
  clearInterval(timerId);
  timerId=setInterval(()=>{
    tLeft--;
    if(tLeft<0){
      clearInterval(timerId);
      finishGame();
      return;
    }
    const mm=String(Math.floor(tLeft/60)).padStart(2,'0');
    const ss=String(tLeft%60).padStart(2,'0');
    ['#timeLeft','#timeLeft2','#timeLeft3'].forEach(id=>{
      const el=$(id); if(el) el.textContent=`${mm}:${ss}`;
    });
  },1000);
}

/* DOMContentLoaded: —Å–ª–æ–≥–∞–Ω, —Å–∫—Ä—ã—Ç–∞—è –∫–Ω–æ–ø–∫–∞, —Ö–µ–Ω–¥–ª–µ—Ä CSV */
window.addEventListener('DOMContentLoaded',()=>{
  $('#slogan').textContent = rand(SLOGANS);

  const exportBtn = $('#exportCSV');
  if(exportBtn) exportBtn.onclick = exportResultsCSV;

  const logo = document.querySelector('.logo');
  if(logo && exportBtn){
    // –î–≤–æ–π–Ω–æ–π –∫–ª–∏–∫ –ø–æ –ª–æ–≥–æ—Ç–∏–ø—É ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å/—Å–ø—Ä—è—Ç–∞—Ç—å –∫–Ω–æ–ø–∫—É —ç–∫—Å–ø–æ—Ä—Ç–∞
    logo.addEventListener('dblclick', ()=>{
      exportBtn.style.display = exportBtn.style.display === 'none' ? 'inline-flex' : 'none';
    });
  }
});

$('#btnHow').onclick=()=>{
  const h=$('#howto');
  h.style.display = h.style.display==='none'?'block':'none';
};

$('#btnStart').onclick=()=>{
  nameUser = $('#playerName').value.trim() || '–£—á–∞—Å—Ç–Ω–∏–∫ –í–¢–°–¢';
  score=0; tLeft=180; SCORE.quiz=SCORE.sort=SCORE.tiles=0;
  buildQuiz();
  updateScoreViews();
  goto('#screen-quiz');
  startTimer();
};

/* –í–∏–∫—Ç–æ—Ä–∏–Ω–∞ */
function buildQuiz(){
  const wrap = $('#quizWrap'); wrap.innerHTML='';
  $('#tipQuiz').textContent = rand(TIPS.quiz);

  const pick = shuffle([...QUESTIONS]).slice(0,5);
  pick.forEach((item,i)=>{
    const box=document.createElement('div'); box.className='qbox';
    box.innerHTML=`<div><b>–í–æ–ø—Ä–æ—Å ${i+1}:</b> ${item.q}</div>
      <div class="answers">
        <button data-v="true">–î–∞</button>
        <button data-v="false">–ù–µ—Ç</button>
      </div>`;
    const btns = box.querySelectorAll('button');
    btns.forEach(b=>{
      b.onclick=()=>{
        if(box.dataset.done) return;
        const val = (b.dataset.v==='true');
        if(val===item.correct){ b.classList.add('correct'); SCORE.quiz+=10; score+=10; }
        else { b.classList.add('wrong'); }
        box.dataset.done='1';
        updateScoreViews();
        const allDone = [...$('#quizWrap').children].every(c=>c.dataset.done);
        $('#toSort').disabled=!allDone;
      };
    });
    wrap.appendChild(box);
  });
}
$('#toSort').onclick=()=>{ buildSort(); goto('#screen-sort'); };

/* –ó–∞–¥–∞–Ω–∏–µ 2 ‚Äî –∫–µ–π—Å—ã */
function buildSort(){
  const wrap = $('#casesWrap'); wrap.innerHTML='';
  $('#tipSort').textContent = rand(TIPS.sort);

  const pick = shuffle([...CASES]).slice(0,4);
  pick.forEach((item, idx)=>{
    const box = document.createElement('div');
    box.className='qbox';
    box.innerHTML = `<div><b>–°–∏—Ç—É–∞—Ü–∏—è ${idx+1}:</b> ${item.text}</div>`;
    const ansDiv = document.createElement('div');
    ansDiv.className='answers';

    item.options.forEach((opt, iOpt)=>{
      const btn = document.createElement('button');
      btn.textContent = opt;
      btn.onclick = ()=>{
        if(box.dataset.done) return;
        box.dataset.done='1';
        if(iOpt===item.correct){
          btn.classList.add('correct');
          SCORE.sort += 5;
          score += 5;
        } else {
          btn.classList.add('wrong');
          const btns = ansDiv.querySelectorAll('button');
          if(btns[item.correct]) btns[item.correct].classList.add('correct');
        }
        updateScoreViews();
        const allDone = [...wrap.children].every(c=>c.dataset.done);
        $('#toTiles').disabled=!allDone;
      };
      ansDiv.appendChild(btn);
    });

    box.appendChild(ansDiv);
    wrap.appendChild(box);
  });
}
$('#toTiles').onclick=()=>{ buildTiles(); goto('#screen-tiles'); };

/* –°–ª–æ–≤–æ –ï–î–ò–ù–°–¢–í–û */
let chosen=[];
function buildTiles(){
  chosen=[]; $('#progressWord').textContent=''; $('#finish').disabled=true;
  $('#hintBox').style.display='none'; $('#hintBox').textContent='';
  $('#tipTiles').textContent = rand(TIPS.tiles);

  const cont = $('#tiles'); cont.innerHTML='';
  const letters = shuffle([...WORD.split('')]);
  letters.forEach(ch=>{
    const b=document.createElement('button'); b.className='tile'; b.textContent=ch;
    b.onclick=()=>{
      if(b.classList.contains('used')) return;
      b.classList.add('used');
      if(LETTER_HINTS[ch]){
        const hb=$('#hintBox');
        hb.style.display='block';
        hb.textContent=`${ch} ‚Äî ${LETTER_HINTS[ch]}`;
      }
      chosen.push(ch);
      $('#progressWord').textContent=chosen.join('');
      if(chosen.join('')===WORD){
        const pts = 30;
        if(SCORE.tiles===0){
          score+=pts; SCORE.tiles=pts; updateScoreViews();
        }
        $('#finish').disabled=false;
      }
    };
    cont.appendChild(b);
  });
}

/* –§–∏–Ω–∏—à */
$('#finish').onclick=finishGame;

function updateScoreViews(){
  $('#scoreA').textContent=SCORE.quiz;
  $('#scoreB').textContent=SCORE.sort;
  $('#scoreC').textContent=SCORE.tiles;
}

function finishGame(){
  clearInterval(timerId);
  goto('#screen-result');
  $('#finalScore').textContent=score;

  let msg;
  if(score>=80){
    msg = '–¢—ã ‚Äî –º–æ—Ç–æ—Ä –∫–æ–º–∞–Ω–¥—ã –í–¢–°–¢: –≤—ã—Å–æ–∫–∏–π —É—Ä–æ–≤–µ–Ω—å –∫–æ–º–∞–Ω–¥–Ω–æ–≥–æ –º—ã—à–ª–µ–Ω–∏—è –∏ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏.';
  } else if(score>=55){
    msg = '–û—Ç–ª–∏—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç! –ù–∞ —Ç–µ–±—è –º–æ–∂–Ω–æ –æ–ø–µ—Ä–µ—Ç—å—Å—è –≤ –æ–±—â–µ–º –¥–µ–ª–µ.';
  } else if(score>=30){
    msg = '–•–æ—Ä–æ—à–∏–π —Å—Ç–∞—Ä—Ç. –ß–µ–º –±–æ–ª—å—à–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –≤ —Å–æ–±—ã—Ç–∏—è—Ö —Ç–µ—Ö–Ω–∏–∫—É–º–∞ ‚Äî —Ç–µ–º —Å–∏–ª—å–Ω–µ–µ –±—É–¥–µ—Ç —á—É–≤—Å—Ç–≤–æ –∫–æ–º–∞–Ω–¥—ã.';
  } else {
    msg = '–ö–∞–∂–¥—ã–π –ø—Ä–æ—Ö–æ–¥–∏—Ç –ø—É—Ç—å –∫ –µ–¥–∏–Ω—Å—Ç–≤—É —Å –º–∞–ª–æ–≥–æ. –ì–ª–∞–≤–Ω–æ–µ ‚Äî –¥–µ–ª–∞—Ç—å –ø–µ—Ä–≤—ã–µ —à–∞–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–π –∂–∏–∑–Ω–∏ —Ç–µ—Ö–Ω–∏–∫—É–º–∞.';
  }
  $('#finalMessage').textContent = msg;

  drawBadge();
  updatePools();
  saveLocalResult();
}

/* –ë–µ–π–¥–∂ */
function drawBadge(){
  const c=$('#badge'), g=c.getContext('2d');

  const grd = g.createLinearGradient(0,0,c.width,c.height);
  grd.addColorStop(0,'#020617');
  grd.addColorStop(.4,'#0b1430');
  grd.addColorStop(1,'#020617');
  g.fillStyle=grd; g.fillRect(0,0,c.width,c.height);

  const grd2 = g.createLinearGradient(0,0,c.width,0);
  grd2.addColorStop(0,CONFIG.gradientA);
  grd2.addColorStop(1,CONFIG.gradientB);
  g.fillStyle=grd2; g.fillRect(0,0,c.width,24);

  g.fillStyle='#fff';
  g.font='bold 52px system-ui';
  g.fillText(CONFIG.brand, 40, 100);
  g.font='24px system-ui';
  g.fillStyle='rgba(248,250,252,.9)';
  g.fillText('–û–Ω–ª–∞–π–Ω-–∫–≤–µ—Å—Ç ¬´–†–∞–∑–Ω—ã–µ ‚Äî –Ω–æ –≤–º–µ—Å—Ç–µ¬ª', 40, 138);

  g.fillStyle='#e5e7eb';
  g.font='28px system-ui';
  g.fillText('–£—á–∞—Å—Ç–Ω–∏–∫:', 40, 210);
  g.font='bold 44px system-ui';
  g.fillStyle='#bfdbfe';
  fitText(g, nameUser, 40, 260, 820, 'bold 44px system-ui');

  g.fillStyle='#e5e7eb';
  g.font='28px system-ui';
  g.fillText('–ò—Ç–æ–≥–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:', 40, 340);
  g.font='bold 64px system-ui';
  g.fillStyle='#a5b4fc';
  g.fillText(`${score} –æ—á–∫–æ–≤`, 40, 408);

  const values = [
    '–ï–¥–∏–Ω—ã–µ —Ü–µ–ª–∏','–î–æ–≤–µ—Ä–∏–µ','–ò–Ω–∏—Ü–∏–∞—Ç–∏–≤–∞','–ù–∞—Å—Ç–∞–≤–Ω–∏—á–µ—Å—Ç–≤–æ',
    '–°–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–æ','–¢—Ä—É–¥–æ–ª—é–±–∏–µ','–í–æ–≤–ª–µ—á—ë–Ω–Ω–æ—Å—Ç—å','–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å'
  ];
  g.font='22px system-ui';
  g.fillStyle='rgba(241,245,249,.95)';
  let x=40,y=480;
  values.forEach(v=>{
    const w=g.measureText(v).width+30;
    if(x+w>c.width-40){ x=40; y+=48; }
    pill(g,x,y,w,38,'rgba(15,23,42,.9)','rgba(148,163,184,.8)');
    g.fillText(v, x+15, y+26);
    x+=w+12;
  });

  g.strokeStyle='rgba(148,163,184,.7)';
  g.lineWidth=2;
  g.strokeRect(20,20,c.width-40,c.height-40);

  g.font='26px system-ui';
  g.fillStyle='#4ade80';
  g.fillText('–Ø ‚Äî —á–∞—Å—Ç—å –∫–æ–º–∞–Ω–¥—ã –í–¢–°–¢', 40, c.height-90);
  g.font='20px system-ui';
  g.fillStyle='rgba(226,232,240,.9)';
  g.fillText('–†–∞–∑–Ω—ã–µ ‚Äî –Ω–æ –≤–º–µ—Å—Ç–µ ‚Ä¢ @–í–¢–°–¢.LIVE', 40, c.height-50);

  $('#downloadBadge').onclick=()=>{
    const a=document.createElement('a');
    a.href=c.toDataURL('image/png');
    a.download='VTSTLIVE_badge.png';
    a.click();
  };
  $('#copyShare').onclick=()=>{
    const text=`–ü—Ä–æ—à—ë–ª(–ª–∞) –æ–Ω–ª–∞–π–Ω-–∫–≤–µ—Å—Ç ${CONFIG.brand} ¬´–†–∞–∑–Ω—ã–µ ‚Äî –Ω–æ –≤–º–µ—Å—Ç–µ¬ª ‚Äî ${score} –æ—á–∫–æ–≤! #–í–¢–°–¢ #–í–¢–°–¢LIVE #–ú—ã–í–º–µ—Å—Ç–µ`;
    navigator.clipboard.writeText(text).then(()=>alert('–¢–µ–∫—Å—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω ‚Äî –º–æ–∂–Ω–æ –≤—Å—Ç–∞–≤–ª—è—Ç—å –≤ —Å—Ç–æ—Ä–∏—Å/–ø–æ—Å—Ç.'));
  };
}

function pill(g,x,y,w,h,bg,stroke){
  g.fillStyle=bg;
  g.strokeStyle=stroke;
  g.lineWidth=1.6;
  g.beginPath();
  g.moveTo(x+ h/2, y);
  g.lineTo(x+w-h/2,y);
  g.quadraticCurveTo(x+w,y,x+w,y+h/2);
  g.lineTo(x+w,y+h-h/2);
  g.quadraticCurveTo(x+w,y+h,x+w-h/2,y+h);
  g.lineTo(x+h/2,y+h);
  g.quadraticCurveTo(x,y+h,x,y+h/2);
  g.lineTo(x,y+h/2);
  g.quadraticCurveTo(x,y,x+h/2,y);
  g.closePath();
  g.fill();
  g.stroke();
}

function fitText(ctx, text, x, y, maxWidth, baseFont) {
  let size = parseInt(baseFont.match(/\d+/)[0],10);
  ctx.font=baseFont;
  while(ctx.measureText(text).width>maxWidth && size>18){
    size-=2;
    ctx.font=baseFont.replace(/\d+px/, size+'px');
  }
  ctx.fillText(text, x, y);
}

/* –ö–æ–ø–∏–ª–∫–∞ –∏ –∂—É—Ä–Ω–∞–ª */
async function updatePools(){
  const prev = parseInt(localStorage.getItem(LOCAL_POOL_KEY)||'0',10);
  const localTotal = prev + score;
  localStorage.setItem(LOCAL_POOL_KEY, String(localTotal));

  const label='–õ–æ–∫–∞–ª—å–Ω–∞—è (–Ω–∞ —ç—Ç–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ)';
  const total=localTotal;

  $('#poolLabel').textContent=label;
  $('#poolTotal').textContent=total;
  const pct = Math.max(5, Math.min(100, (total%1000)/10));
  $('#poolBar').style.width=pct+'%';
}

function saveLocalResult(){
  const raw = localStorage.getItem(RESULTS_KEY);
  let arr;
  try{ arr = raw ? JSON.parse(raw) : []; } catch(e){ arr = []; }
  arr.push({
    name: nameUser,
    score: score,
    ts: new Date().toISOString()
  });
  localStorage.setItem(RESULTS_KEY, JSON.stringify(arr));
}

function exportResultsCSV(){
  const raw = localStorage.getItem(RESULTS_KEY);
  if(!raw){
    alert('–ü–æ–∫–∞ –Ω–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.');
    return;
  }
  let arr;
  try{ arr = JSON.parse(raw); } catch(e){
    alert('–ù–µ —É–¥–∞–ª–æ—Å—å –ø—Ä–æ—á–∏—Ç–∞—Ç—å –∂—É—Ä–Ω–∞–ª —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.');
    return;
  }
  if(!Array.isArray(arr) || !arr.length){
    alert('–ü–æ–∫–∞ –Ω–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.');
    return;
  }

  let csv = '–ò–º—è;–û—á–∫–∏;–î–∞—Ç–∞/–≤—Ä–µ–º—è\n';
  arr.forEach(r=>{
    const name = (r.name||'').replace(/"/g,'""');
    const sc = r.score ?? '';
    const dt = r.ts ? new Date(r.ts).toLocaleString('ru-RU') : '';
    csv += `"${name}";"${sc}";"${dt}"\n`;
  });

  // >>> –í–ê–ñ–ù–û: –¥–æ–±–∞–≤–ª—è–µ–º BOM, —á—Ç–æ–±—ã Excel –ø–æ–Ω—è–ª UTF-8
  const BOM = '\uFEFF';
  const blob = new Blob([BOM + csv], { type:'text/csv;charset=utf-8;' });

  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = 'vtstlive_kvest_rezultaty.csv';
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  URL.revokeObjectURL(url);
}

</script>
</body>
</html>
